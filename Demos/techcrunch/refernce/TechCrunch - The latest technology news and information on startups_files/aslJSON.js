(function(cfg){function ASLInit(){var placementHTMLObj={};var parameters={c:"ASL.jsonToHTML",pid:"",k:"",type:0,placementId:"",previousPlacementIds:"",docTitle:(function(){var t="";try{t=top.document.title;
}catch(e){}return t;})(),referrer:(function(){var t="";try{t=top.location.href;}catch(e){}return t;})(),refReferrer:(function(){var t="";try{t=top.document.referrer;}catch(e){}return t;})(),housead:"",test:""};
function cfgToParams(){var placementIds=[],nb=[];for(var cParam in ASL.cfg){if(cParam in parameters){parameters[cParam]=cfg[cParam];}}for(var i in ASL.cfg.placements){if(ASL.cfg.placements[i].placementId){placementIds.push(ASL.cfg.placements[i].placementId);
nb.push((ASL.cfg.placements[i].numAds&&ASL.cfg.placements[i].numAds>0)?ASL.cfg.placements[i].numAds:4);}}parameters.placementId=placementIds.join(",");parameters.nb=nb.join(",");}function JSONscriptRequest(){var n=0;
var docHead=document.getElementsByTagName("head")[0];var scriptId="ASLScript"+n;var fullUrl=makeURL()+"&noCache="+(new Date()).getTime();var scriptElement;function buildScriptTag(){scriptElement=document.createElement("script");
scriptElement.setAttribute("type","text/javascript");scriptElement.setAttribute("src",fullUrl);scriptElement.setAttribute("id",scriptId);n++;scriptId="ASLScript"+n;}function addScriptTag(){docHead.appendChild(scriptElement);
}function removeScriptTag(){docHead.removeChild(scriptElement);}function makeURL(){var prefixArr=["tw","espn"];var prefix="";var env=ASL.cfg.env;if(env){switch(env){case 0:prefix=(!(isNaN(ASL.cfg.subDomain))&&parseInt(ASL.cfg.subDomain)<=prefixArr.length)?"http://ads."+prefixArr[ASL.cfg.subDomain]+".":(location.protocol=="https:")?"https://ssl-ads.":"http://ads.";
break;case 1:prefix="http://ads.mtc.staging.";break;case 2:prefix="htt://qaqws1.stage.root/adserving/getAdsAPI.jsp?version=2";break;}}else{prefix=(!(isNaN(ASL.cfg.subDomain))&&parseInt(ASL.cfg.subDomain)<=prefixArr.length)?"http://ads."+prefixArr[ASL.cfg.subDomain]+".":(location.protocol=="https:")?"https://ssl-ads.":"http://ads.";
}var url="";if(env!=2){url=prefix+"adsonar.com/adserving/getAdsAPI.jsp?version=2";}else{url=prefix;}for(var prop in parameters){if(parameters[prop]){validateParam(prop);url+="&"+prop+"="+encodeURIComponent(parameters[prop]);
}}return url;function validateParam(whatParam){switch(whatParam){case"nb":var nbArr=parameters.nb.toString().split(",");for(var i=0;i<nbArr.length;i++){if(nbArr[i]>10){nbArr[i]=10;}}parameters.nb=nbArr.join(",");
break;case"docTitle":var dt=(parameters.docTitle||top.document.title);if(dt.length>100){dt=dt.substring(0,50)+"-"+dt.substring(dt.length-50,dt.length);}parameters.docTitle=dt;break;case"refReferrer":var urllength=url.length;
if(urllength<2000&&parameters.refReferrer){if((parameters.refReferrer.length+urllength)>2000){parameters.refReferrer=(parameters.refReferrer.substring(0,2000-urllength)||"");}}break;}}}buildScriptTag();
addScriptTag();}return{cfg:cfg,init:function(){try{cfgToParams();JSONscriptRequest();}catch(e){logError(e);}},jsonToHTML:function(obj){if(obj.response.statusCode==200){try{var dataObject=obj.response.data;
var numPlacements=dataObject.numPlacements;for(var i=0;i<numPlacements;i++){var hStr="<div class='ASLcontainer'><span>Sponsored Links</span>";var liArr=dataObject.placement[i].listing;for(var j=0;j<liArr.length;
j++){if(liArr[j].isBanner!="undefined"&&liArr[j].isBanner=="true"){hStr+="<div class='adsonarAd'>";if(typeof(liArr[j].image)!="undefined"){hStr+="<img src='"+location.protocol+"//"+liArr[j].image.src+"' style='width:"+liArr[j].image.width+"px;height:"+liArr[j].image.height+"px;'  onclick=\"window.open('"+liArr[j].targetUrl+"' ,'_blank');\"/>";
}hStr+="</div>";if(typeof(liArr[j].viewThruURL)!="undefined"){hStr+="<img src='"+liArr[j].viewThruURL+"' style='position:absolute;display:none;width:1px;height:1px;' alt=''/>";}}else{hStr+="<div class='adsonarAd' title='"+liArr[j].description+"' onclick=\"window.open('"+liArr[j].targetUrl+"' ,'_blank');\">";
if(typeof(liArr[j].image)!="undefined"){hStr+="<img src='"+location.protocol+"//"+liArr[j].image.src+"' alt='' class='adImage' style='width:"+liArr[j].image.width+"px;height:"+liArr[j].image.height+"px;'/>";
}hStr+="<a href='#' title='"+liArr[j].title+"' onclick='return false;' class='title'>"+liArr[j].title+"</a>";hStr+=liArr[j].description;hStr+="<a href='#' title='"+liArr[j].domain+"' onclick='return false;' class='displayUrl'>"+liArr[j].domain+"</a>";
hStr+="</div>";if(typeof(liArr[j].viewThruURL)!="undefined"){hStr+="<img src='"+liArr[j].viewThruURL+"' style='position:absolute;display:none;width:1px;height:1px;' alt=''/>";}}}hStr+="<a class='buylink' href='"+obj.response.searchinfo.domain.buyLink+"' target='_blank'>Buy a link here</a></div>";
if(ASL.cfg.mode!="manual"){for(var placementNum in ASL.cfg.placements){var placement=ASL.cfg.placements[placementNum];if(placement.placementId==dataObject.placement[i].id){for(var elementNum in placement.pageElements){var element=placement.pageElements[elementNum];
loadAd(element,hStr,8);}break;}}}if(ASL.cfg.mode=="manual"||(!placement.pageElements||placement.pageElements.length==0)){placementHTMLObj[dataObject.placement[i].id]=hStr;this.placementHTMLObj=placementHTMLObj;
}}}catch(e){logError(e);}}else{logError("API returned error. Most likely  bad placement id.\nError code: "+obj.response.statusCode+" - "+obj.response.statusText);}function loadAd(ele,text,num){var e=document.getElementById(ele);
if(e){e.innerHTML=text;return;}if(num>0){num--;setTimeout(function(){loadAd(ele,text,num);},250);}else{logError("tried 8 times to load ad into id '"+ele+"'. Couldn't find on the page.");}}}};}function logError(e){if(typeof(console)!="undefined"){console.log(e);
}}var iASL=new ASLInit();iASL.init();window.ASL=iASL;})(ASL.cfg);